<aura:component controller="WorkingHourController">
    <aura:attribute name="resourceStaffId" type="String"/>
    <!--@description contains init handler -->
    <aura:attribute name="isSpinner" type="Boolean" default="false"/>
    <aura:attribute name="isModelOpen" type="Boolean" default="false"/>
    <aura:attribute name="ResourceName" type="String" default=" "/>
    <aura:attribute name="hideFooter" type="Boolean" default="false"/>
    <!-- @description contains name of field name to apply sorting.-->
    <aura:attribute name="sortBy" type="String"/>
    <!-- @description contains sorting direction i.e ascending or descending.-->
    <aura:attribute name="sortDirection" type="String"/>
    <aura:attribute name="data" type="Object[]"/>
    <aura:attribute name="columns" type="Object[]"/>
    <aura:attribute name="filteredData" type="Object[]" />
    <aura:attribute name="pageNumber" type="Integer" default="1"/>
    <aura:attribute name="isLastPage" type="Boolean" default="false"/>
    <!-- @description contains total number of customer records.-->
    <aura:attribute name="dataSize" type="Integer" default="0"/>
    <!-- @description contains all records data.-->
    <aura:attribute name="allRecords" type="List"/>
    <!--@description contains pageSize i.e no of records to show on a page in pagination.-->
    <aura:attribute name="pageSize" type="Integer" default="10"/>
    <!--@description contains list of records after applying pagination.-->
    <aura:attribute name="paginationList" type="List" default="[]"/>
    <!--@description contains integer value of total number of pages shown in a datatable.-->
    <aura:attribute name="totalPages" type="Integer" default="0"/>
    <aura:attribute name="showToast" type="boolean" default="false"/>
    <!--@description This attribute holds the resource record-->   
    <aura:attribute name="resourceRecord" type="Contact" default=""/>
    <aura:attribute name="noDataFound" type="String" default=" "/>
    
    
    <aura:attribute name="workingRecord" type="Working_Hour__c" default="{'sObjectType':'CC_QAppt__Working_Hour__c','CC_QAppt__Active__c':'','CC_QAppt__End_Time__c':'','CC_QAppt__Start_Time__c':''}"/>
    <aura:handler name="init" action="{!c.doInit}" value="{!this}"/>
    <aura:method name="getWorkingMethod" action="{!c.getResourceStaffId}" access="PUBLIC">
        <aura:attribute name="ResourceName" type="String" default=" "/>
    </aura:method>
    <aura:handler name="refreshEvent" event="c:ParentListRefresh" action="{! c.onSaveAndEdit }"/>
    
    <c:NewWorkingHour isModelOpen="{!v.isModelOpen}" aura:id="NewWorkingHour" resourceRecord="{!v.resourceRecord}" workingRecord="{!v.workingRecord}"/>
    
    <div class="slds-grid slds-gutters slds-p-left_x-small">
        <div class="slds-col">
            <span class="slds-text-heading_large ">Working Hours</span> 
        </div>
        
        <div class="slds-col">
            <span class=".slds-float_left"><button class="slds-button slds-button_neutral" onclick="{!c.OnAddNewWorkingHour}">New</button></span>
        </div>
        
        
        
    </div>
    
    <div class="slds-m-top_xx-large">
        <aura:if isTrue="{!v.isSpinner}">
            <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
                <span class="slds-assistive-text">Loading</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </aura:if>
        
        <lightning:datatable aura:id = "accDT"
                             class="slds-m-horizontal_medium"
                             columns = "{!v.columns}"
                             data = "{!v.data}"
                             keyField = "Id"
                             hideCheckboxColumn="true"
                             onsort="{!c.handleSort}"
                             sortedBy="{!v.sortBy}"  
                             sortedDirection="{!v.sortDirection}"
                             />
        <aura:if isTrue="{!v.showToast}">
            <div class=" slds-m-top_x-small slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_info" role="alert">
                <h2>There are no WorkingHours for this Resource Staff</h2>
                <div class="slds-notify__close">
                    <button class="slds-button slds-button_icon slds-button_icon-small" title="Close" onclick="{!c.closeAlert}">
                        <lightning:icon iconName="utility:close" alternativeText="close" size="small" />
                    </button>
                </div>
            </div> 
        </aura:if>
        
        <aura:if  isTrue="{!v.hideFooter}">
            
            <div class="slds-clearfix">
                
                <div class="slds-float_right">            
                    <lightning:button label="Prev" iconName="utility:chevronleft" iconPosition="left"
                                      onclick="{!c.onPrev}" disabled="{! v.pageNumber == 1}"/>
                    <lightning:button label="First"  iconPosition="left"
                                      onclick="{!c.onFirst}" disabled="{! v.pageNumber == 1}"/>
                    <lightning:button  label="Last"  iconPosition="left"
                                      onclick="{!c.onLast}" disabled="{! v.isLastPage }"/>
                    <lightning:button label="Next" iconName="utility:chevronright" iconPosition="right"
                                      disabled="{!v.isLastPage}" onclick="{!c.onNext}"/>
                </div>
                
                <p class="  slds-float_left slds-badge slds-badge_lightest">Page {!v.pageNumber} of {!v.totalPages} </p>
            </div></aura:if>
        
        
    </div>
    
    
    
    
</aura:component>