<apex:page standardStylesheets="false" showHeader="false" sidebar="false" controller="LocationCtrl" title="{!$Label.cc_qappt__location} -{!$Label.cc_qappt__quick_appointment}">
   <!-- <apex:slds /> -->
    <c:NewHeader />
      <style> 
  body  {
  display:none;
  } 
  </style>
 <script>
window.addEventListener("DOMContentLoaded", function(){
  document.getElementsByTagName("body")[0].style.display = "block";
});
</script>
    <script type="text/javascript" src="path_to/jquery.js"></script>
    <script type="text/javascript" src="path_to/jquery.simplePagination.js"></script>
    <!-- Menu Code --->
    <script>
    $(document).ready(function() {
      $('#action').removeClass('headerSortDown');
    });
    </script>
    <body  hoe-navigation-type="vertical" hoe-nav-placement="left" id="navTypeAndPlacement">
         <script src="{!URLFOR($Resource.Semantic,'semantic/jquery-simple-pagination-plugin.js')}" type="text/javascript"></script>    
          
        <div id="hoeapp-wrapper" class="hoe-hide-lpanel" hoe-device-type="desktop">
            <c:HeaderNested />
            <div id="hoeapp-container" hoe-color-type="lpanel-bg2" hoe-lpanel-effect="shrink">
                <c:SideBar />
    <section id="main-content">
    <!-- Menu Code End --->
    <style>
        
    .custPopup{
        background-color: white;
        border-width: 0px;
        border-radius:10px;
        z-index: 9999;
        left: 50%;
        padding:20px;
        position: absolute;
        margin-left: -100px;
        top:40%;
    }
    div.simple-pagination-page-numbers a:not(:first-child) {
   margin-left:5px;
}
    .popupBackground{
        background-color:black;
        opacity: 0.30;
        filter: alpha(opacity = 30);
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 9998;
    }
 .custPopup1 {
    background-color: white;
    border-width: 0px;
    border-radius: 10px;
    z-index: 9999;
    padding: 20px;
    position: absolute;
    margin-left: 35%;
    top: -2%;
}
/*.popupBackground1 {
    background-color: black;
    opacity: 0.30;
    filter: alpha(opacity = 30);
    position: absolute;
    width: 90%;
    height: 43%;
    top: -17px;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 9998;
  }*/
  table.tablesorter thead tr .header {
        background: URL({!URLFOR($Resource.tablesorter,'tablesorter/bg.GIF')}) no-repeat;
        background-position: center right;
        cursor: pointer;
    }
    table.tablesorter thead tr .headerSortUp { 
        background: URL({!URLFOR($Resource.tablesorter,'tablesorter/up.GIF')}) no-repeat; 
        background-position: center right;
        cursor: pointer;
    } 
    table.tablesorter thead tr .headerSortDown{ 
        background: URL({!URLFOR($Resource.tablesorter,'tablesorter/down.GIF')}) no-repeat; 
        background-position: center right;
        cursor: pointer;
    } 
     </style>
        <apex:actionStatus id="fetching">
            <apex:facet name="start">
                 <apex:outputPanel id="tstpopup">
                        <apex:outputPanel styleClass="popupBackground" layout="block"/>
                        <apex:outputPanel styleClass="custPopup" layout="block">
                            <img src="/img/loading24.gif" style="vertical-align:middle; horizontal-align:middle"/> 
                            <span>Please wait...</span>  
                        </apex:outputPanel>
                  </apex:outputPanel> 
            </apex:facet>
        </apex:actionStatus>
         <apex:actionStatus id="savestatus">
            <apex:facet name="start">
                 <apex:outputPanel id="tst">
                        <apex:outputPanel layout="block"/>
                        <apex:outputPanel styleClass="custPopup1" layout="block">
                            <img src="/img/loading24.gif" style="vertical-align:middle; horizontal-align:middle"/> 
                            <span>Please wait...</span>  
                        </apex:outputPanel>
                  </apex:outputPanel> 
            </apex:facet>
        </apex:actionStatus>
        
        
            
        <!-- Main code of location Page --->
        <apex:form id="LocationPanel">
            <apex:actionFunction name="addNewLocation" action="{!goToNewEditMode}" reRender="errorMsg,LocationPanel" oncomplete=" showpopup();return false;" status="fetching">
                <apex:param assignTo="{!locationId}" name="locId" value=""/>
            </apex:actionFunction>
        
            <apex:actionFunction id="errorshow" name="errorshow" action="{!saveLocation}" reRender="errorMsg,locationtableid,pagination2" status="savestatus" oncomplete="console.log('@@##= {!errorDiv}'); hidePopUp({!errorDiv});">
            </apex:actionFunction>
        
            <apex:actionFunction name="DeleteLocation" action="{!DeleteLocation}" reRender="LocationPanel" status="fetching">
                <apex:param assignTo="{!locationIdForDelete}" name="locDeleteId" value=""/>
            </apex:actionFunction>
            
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4" align="center">
                    <h2>{!$Label.Locations_Details}</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-offset-4 col-md-4" align="center">
                    <button class="btn btn-default" onclick="addNewLocation(); return false;"><apex:outputText value="{!$Label.cc_qappt__new}"/></button>
                </div>
                <div class="col-md-4">
                    <div style="display: flex;"><apex:inputText value="{!locationNameSearch}" html-Placeholder="Search by Address" styleClass="form-control location-val" id="id_of_textbox" onkeyup="handleKeypress(event),handleKeypress2(event);"/>
                    <apex:commandButton action="{!search}"  onclick="if($('[id$=id_of_textbox]').val().trim().length==0) return false;"  value="{!$Label.cc_qappt__search}" styleClass="btn btn-default search" id="id_of_button" reRender="LocationPanel,test" /></div>
                </div>
                
            </div><br/>
            
            <div class="row">
                <div class="col-sm-12">
                    <div class="table-responsive" id="first-container" style="padding: 5%;padding-top: 1%;">  
                    <apex:outputPanel id="locationtableid">
                        <table class="table table-striped tablesorter" id="table">
                            <thead>
                                <tr>
                                    <th id="action" class="header">{!$Label.cc_qappt__action}</th>
                                    <th><apex:outputText value="{!$Label.cc_qappt__location_name}"/></th>
                                    <th><apex:outputText value="{!$Label.cc_qappt__address}"/></th>
                                    <th><apex:outputText value="{!$Label.cc_qappt__city}"/></th>
                                    <th><apex:outputText value="{!$Label.cc_qappt__state}"/></th>
                                    <th><apex:outputText value="{!$Label.cc_qappt__postal_code}"/></th>
                                    <th><apex:outputText value="{!$Label.cc_qappt__country}"/></th>
                                    
                                   <!--  <th><apex:outputText value="{!$Label.Active}"/></th>  -->
                                </tr>  
                            </thead>
                            <tbody>
                                <apex:repeat value="{!locList}" var="lo">
                                <tr>
                                  <td><a href="" onclick="addNewLocation('{!lo.id}');return false;">{!$Label.Edit}</a>|
                                      <a href="javascript:if (window.confirm('If you delete this location avaliable appointment on this location will also be deleted Are you sure?')) DeleteLocation('{!lo.id}');">{!$Label.Delete}</a>
                                  </td>
                                  <td>{!lo.name}</td>
                                  <td>{!lo.Street__c}</td>
                                  <td>{!lo.City__c}</td>
                                  <td>{!lo.State__c}</td>
                                  <td>{!lo.Postal_Code__c}</td>
                                  <td>{!lo.Country__c}</td>
                                  <!-- <td><apex:inputCheckbox disabled="true" value="{!lo.Active__c}" /></td> -->
                                </tr>
                                </apex:repeat>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="5" id="test">
                                    <apex:outputPanel rendered="{!containtselement}">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <td id="first">                
                                                        <div class="simple-pagination-first form-control"></div>
                                                    </td>
                                                    <td style="padding-left: 5px;">
                                                        <div class="simple-pagination-previous form-control"></div>
                                                    </td>
                                                    <td style="padding-left: 5px;">
                                                        <div class="simple-pagination-next form-control"></div>
                                                    </td>
                                                    <td style="padding-left: 5px;">
                                                        <div class="simple-pagination-last form-control"></div>
                                                    
                                                    </td>
                                                    <td style="padding-left: 5px;">
                                                        <div class="simple-pagination-page-numbers form-control"></div>
                                                    </td>
                                                    <td style="padding-left: 5px;">
                                                        <div class="simple-pagination-page-x-of-x form-control"></div>
                                                    </td>                                            
                                                </tr>
                                            </thead>
                                        </table>  
                                  
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!!containtselement}">
                                        <p><center><b>No Records Found</b></center></p>
                                        </apex:outputPanel>
                                    </td>
                                </tr>
                            </tfoot> 
                        </table>
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
       
            <div class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">{!$Label.cc_qappt__location}</h4>
                  </div>
                 <div class="modal-body">
                    <apex:outputPanel id="errorMsg">
                        <apex:outputPanel rendered="{!errorDiv}">
                        <div class="alert alert-danger" role="alert" style="margin-top: 9px;">
                         <span class="sr-only">Error:</span>
                         <apex:pageMessages />
                          </div>
                          <script type="text/javascript">   
                          $( document ).ready(function() {
                              //alert( "document loaded" );
                        });        
                       
                        </script>
                        </apex:outputPanel>
                       
                    </apex:outputPanel>
                   <div class="row">
                        <div class="col-md-6">
                            <label>{!$Label.cc_qappt__location_name}</label>
                            <apex:inputText html-placeholder="{!$Label.cc_qappt__location_name}" value="{!loc.name}" styleClass="form-control"/>
                            
                        </div>
                        <div class="col-md-6">
                            <label>{!$Label.cc_qappt__address}</label>
                            <apex:inputText html-placeholder="{!$Label.cc_qappt__address}" value="{!loc.Street__c}" styleClass="form-control"/>
                        </div> 
                    </div>
                    <div class="row"> 
                        <div class="col-md-6">
                            <label>{!$Label.cc_qappt__city}</label>
                            <apex:inputText html-placeholder="{!$Label.cc_qappt__city}" value="{!loc.City__c}" styleClass="form-control"/>
                            
                        </div>             
                        <div class="col-md-6">
                            <label>{!$Label.cc_qappt__state}</label>
                            <apex:inputText html-placeholder="{!$Label.cc_qappt__state}" value="{!loc.State__c}" styleClass="form-control"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">    
                            <label>{!$Label.cc_qappt__postal_code}</label>
                            <apex:inputText html-placeholder="{!$Label.cc_qappt__postal_code}" value="{!loc.Postal_Code__c}" styleClass="form-control"/>
                         </div>
                          <div class="col-md-6">
                            <label>{!$Label.cc_qappt__country}</label>
                            <apex:inputText html-placeholder="{!$Label.cc_qappt__country}" value="{!loc.Country__c}" styleClass="form-control"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">                  
                          <!-- <apex:inputCheckbox value="{!loc.Active__c}"/><label>{!$Label.Active}</label>-->
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <center><apex:commandButton styleclass="btn btn-default" value="{!$Label.cc_qappt__save}"   onclick="errorshow(); return false;" />&nbsp;
                            <button class="btn btn-default" onclick="$('[id$=myModal]').modal('hide');return false;">{!$Label.cc_qappt__cancel}</button></center>
                            <!--<apex:commandButton onclick="$('[id$=myModal]').modal('hide');" styleclass="btn btn-default" value="{!$Label.cc_qappt__cancel}"/></center>-->
                         </div>
                    </div>
                </div>
              </div>
            </div>
        </div>
        </div>
            <script>
            /*       $( document ).ready(function() {
                    $('[id$=myModal]').css('display','none');
                    $('.location-val').keypress(function(event){
                        if(event.keyCode == 13 || event.which == 13){
                            //$('[id$=myModal]').modal('hide');
                            event.preventDefault();
                            $('[id$=id_of_button]').click();
                            return false;
                        }
                    });
                }); */
                 function handleKeypress2(event){    
      var textvalue = $('[id$=id_of_textbox]').val();     
            if(textvalue == ""){
            handleReRender();
            }
            }
                
                
                
                function handleKeypress(event){
                    // $('[id$=myModal]').css('display','none');
                    if(event.keyCode == 13 || event.which == 13){
                        $('[id$=myModal]').modal('hide');
                        var textvalue = $('.service-val').val();
                        console.log("textvalue",textvalue);
                        event.preventDefault();
                        $('[id$=id_of_button]').click();
                        /*if(textvalue!="" || textvalue!=''){
                           $('[id$=id_of_button]').click();
                            }*/  
               }      
             }
                function showpopup(){
                     $('[id$=myModal]').modal('show');
                }
            </script>
        
            <apex:outputPanel id="pagination2">
                <script>
                    
                    function hidePopUp(errorDiv){
                        
                      $('#first-container').simplePagination({ items_per_page: 15});                                  
                      console.log('@@##4'); 
                      console.log(errorDiv);
                      if(errorDiv == false)
                      {
                          <!-- var pageName = prompt('Visualforce page name:'); -->
                          <!--var pageName = ('Visualforce page name:');-->
                          $('[id$=myModal]').modal('hide');
                      } 
                     
                    }   
                </script>
            </apex:outputPanel>
            
            
            <script>
            
            setTimeout(function(){
                $("#first-container").simplePagination({
                    items_per_page: 15
                });
                setpaginationforfirstpage();
            },0);
              function setpaginationforfirstpage(){
                   var pagecount= $(".simple-pagination-navigation-page").length;
                   if(pagecount==1){
                       var style1 = {
                     'text-decoration':'none',
                     'color': 'black',
                      'pointer-events': 'none',
                     };
                    $('.simple-pagination-navigation-previous').css(style1);
                    $('.simple-pagination-previous.form-control').css('background-color','#dddddd');
                    $('.simple-pagination-navigation-next').css(style1);
                    $('.simple-pagination-next.form-control').css('background-color','#dddddd');
                    $('.simple-pagination-navigation-first').css(style1);
                    $('.simple-pagination-first.form-control').css('background-color','#dddddd');
                    $('.simple-pagination-navigation-last').css(style1);
                    $('.simple-pagination-last.form-control').css('background-color','#dddddd');
                    $('.simple-pagination-navigation-page').css(style1);
                    $('.simple-pagination-navigation-page.form-control').css('background-color','#dddddd');
                    $('.simple-pagination-page-numbers.form-control').css('background-color','#dddddd');
                    $('.simple-pagination-page-x-of-x.form-control').css('background-color','#dddddd');

                   }      
              }            
            </script>
            <apex:actionFunction name="handleReRender" action="{!search}" reRender="LocationPanel,test"  />
        </apex:form>
        </section>
        
        </div>
        </div>  
        </body>
        
        </apex:page>